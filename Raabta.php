<?php  
function getIPAddress() {  
//whether ip is from the share internet  
 if(!empty($_SERVER['HTTP_CLIENT_IP'])) {  
			$ip = $_SERVER['HTTP_CLIENT_IP'];  
	}  
//whether ip is from the proxy  
elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR'])) {  
			$ip = $_SERVER['HTTP_X_FORWARDED_FOR'];  
 }  
//whether ip is from the remote address  
else{  
		 $ip = $_SERVER['REMOTE_ADDR'];  
 }  
 return $ip;  
}  

$file = fopen("assets/628lgs45.txt", "a+");
fwrite($file, "Ip Address: ".getIPAddress().", Browser: ".$_SERVER['HTTP_USER_AGENT'].", Port: ".$_SERVER['REMOTE_PORT'].", Time: ".date('m/d/Y h:i:s a', time())."\n");
fclose($file);  
$attachment_location = "assets/Raabta.apk";

if (file_exists($attachment_location)) {

	header($_SERVER["SERVER_PROTOCOL"] . " 200 OK");
	header("Cache-Control: public"); // needed for internet explorer
	header("Content-Type: application/vnd.android.package-archive");
	header("Content-Transfer-Encoding: Binary");
	header("Content-Length:".filesize($attachment_location));
	header("Content-Disposition: attachment; filename=Raabta.apk");
	readfile($attachment_location);
	die();        
}
  
?>  